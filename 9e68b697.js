Object.defineProperty(Object.prototype,"getProperty",{value:function(e){if(""===e)return this;let t,o=this,r=e.toString().split("."),s=r.length;for(t=0;t<s;t++){if(void 0===o[r[t]])return;o=o[r[t]]}return o}}),Object.defineProperty(Object.prototype,"setProperty",{value:function(e,t){let o,r=this,s=e.toString().split("."),i=s.length;for(o=0;o<i-1;o++)void 0===r[s[o]]&&(r[s[o]]={}),r=r[s[o]];r[s[i-1]]=t}}),Object.defineProperty(Object.prototype,"deleteProperty",{value:function(e){let t=this,o=e.toString().split(".");o.length>1&&(e=o[o.length-1],t=this.getProperty(o.slice(0,-1).join("."))),void 0!==t&&void 0!==t[e]&&delete t[e]}});var om={prefix:"",toastDelay:5e3,toastPosition:"bottom right",langs:{ru:{signup_in_progress:"Выполняется регистрация...",signin_in_progress:"Выполняется вход...",signin_success:"Вход успешно выполнен от имени",signout_in_progress:"Выполняется выход...",signout_success:"Выход выполнен успешно",saving:"Сохранение...",saved:"Сохранено"}},codes:{0:"Успешно",1:"Внутренняя ошибка",2:"Доступ запрещен",100:"Отсутствует обязательный параметр",200:"Адрес электронной почты уже зарегистрирован",201:"Имя пользователя уже зарегистрировано",300:"Неправильный пароль",400:"Имя пользователя или адрес электронной почты не найден",401:"Сессия не найдена",500:"Некорректный адрес электронной почты",501:"Некорректное имя пользователя",502:"Некорректный пароль",503:"Некорректное имя пользователя или адрес электронной почты",504:"Некорректный идентификатор сессии"},sha:async e=>{let t=new TextEncoder("utf-8").encode(e);return t=await crypto.subtle.digest("sha-512",t),(t=Array.from(new Uint8Array(t))).map(e=>("00"+e.toString(16)).slice(-2)).join("")},random:e=>{let t=new Uint8Array(e||1);return crypto.getRandomValues(t),(t=Array.from(t)).map(e=>("00"+e.toString(16)).slice(-2)).join("")},getLocal:(e,t)=>{e=om.prefix+e;let o=localStorage.getItem(e);return void 0===t||null===t?o:(o=null===o?{}:JSON.parse(o),""===t?o:o.getProperty(t))},setLocal:(e,t,o)=>{e=om.prefix+e;let r=localStorage.getItem(e);void 0!==t&&null!==t?(r=null===r?{}:JSON.parse(r),""===t?r=o:r.setProperty(t,o),localStorage.setItem(e,JSON.stringify(r))):localStorage.setItem(e,o)},removeLocal:(e,t)=>{if(e=om.prefix+e,void 0!==t&&null!==t&&""!==t){let o=localStorage.getItem(e);(o=null===o?{}:JSON.parse(o)).deleteProperty(t),localStorage.setItem(e,JSON.stringify(o))}else localStorage.removeItem(e)}};om.lang=om.langs.ru,angular.module("om",["ngResource"]).provider("$om",function(){var e=this;this.url="https://api.om.ua/",this.resources={},this.actions={get:{method:"GET"},list:{method:"GET",isArray:!0},post:{method:"POST"},put:{method:"PUT"},delete:{method:"DELETE"}},this.$get=["$resource",t=>o=>{if(void 0!==e[o])return e[o];switch(o){case"accounts":e[o]=t(e.url+"accounts/:id",{id:"@id"},e.actions);break;case"sessions":e[o]=t(e.url+"sessions/:session",{},e.actions);break;case"tokens":e[o]=t(e.url+"tokens/:token",{},e.actions);break;case"operations":e[o]=t(e.url+"operations/:id",{id:"@id"},e.actions)}return void 0!==e[o]?e[o]:void 0}]});String.prototype.padStart||(String.prototype.padStart=function(t,e){return t>>=0,this.length>t?String(this):(e=String(e||" "),(t-=this.length)>e.length&&(e+=e.repeat(t/e.length)),e.slice(0,t)+String(this))}),String.prototype.inet_aton=function(){let t=new ArrayBuffer(4),e=new DataView(t),n=this.split(".");for(let t=0;t<4;t++)e.setUint8(t,n[t]);return e.getUint32(0)},String.prototype.inet_wildcard=function(){return 4294967295&~this.inet_aton()},Number.prototype.inet_ntoa=function(){let t=new ArrayBuffer(4),e=new DataView(t),n=new Array;e.setUint32(0,this);for(let t=0;t<4;t++)n[t]=e.getUint8(t);return n.join(".")},Number.prototype.inet_bin=function(){return(this>>>0).toString(2).padStart(32,"0").replace(/(.{8})/g,"$1 . ").slice(0,-3)},Number.prototype.bin=function(){return(this>>>0).toString(2)};var app=angular.module("app",["om","ngMaterial","ngRoute"]);app.config(["$mdThemingProvider","$mdIconProvider","$mdAriaProvider","$httpProvider","$locationProvider","$routeProvider",function(t,e,n,i,o,a){t.theme("default").primaryPalette("blue",{default:"700"}),e.defaultFontSet("FontAwesome").fontSet("fa","FontAwesome"),n.disableWarnings(),i.defaults.withCredentials=!0,o.html5Mode({enabled:!0,requireBase:!1}),a.when("/",{templateUrl:"/templates/root.html"}).when("/auth",{templateUrl:"/templates/auth.html"}).otherwise({redirectTo:"/"})}]),app.controller("controller",["$scope","$http","$location","$mdMedia","$mdSidenav","$mdToast","$om",function(t,e,n,i,o,a,r){t.isGt=(()=>i("gt-xs")),t.sidenav=!0,t.isLockedOpenSidenav=(()=>t.sidenav&&i("gt-md")),t.toggleSidenav=(()=>{i("gt-md")?t.sidenav=!t.sidenav:o("left").toggle()}),t.authHash=(()=>btoa(JSON.stringify({origin:location.origin,base:document.getElementsByTagName("base")[0].getAttribute("href"),path:location.pathname}))),t.checkAuth=(()=>{if("/auth/"!==n.path())return;t.message(om.lang.signin_in_progress,!1);let i=JSON.parse(atob(n.hash()));t.id=i.id,t.token=i.token,om.setLocal("id",null,i.id),om.setLocal("token",null,i.token),e.defaults.headers.common["X-Auth-Token"]=i.token,r("accounts").get({id:i.id}).$promise.then(e=>{t.account=e,om.setLocal("account","",{gravatar:e.gravatar}),n.url(i.url),t.message(om.lang.signin_success+" "+(e.firstname||e.username)+" "+e.email)})}),t.getToken=(()=>{t.id||r("tokens").post().$promise.then(n=>(t.id=n.id,t.token=n.token,om.setLocal("id",null,n.id),om.setLocal("token",null,n.token),e.defaults.headers.common["X-Auth-Token"]=n.token,r("accounts").get({id:n.id}).$promise)).then(e=>{t.account=e,om.setLocal("account","",{id:e.id,gravatar:e.gravatar})})}),t.message=((t,e)=>{a.show(a.simple().content(t).hideDelay(void 0!==e?e:om.toastDelay).position(om.toastPosition))}),t.error=(e=>{switch(e.data.code){case 403:t.account={},delete t.id,delete t.token,om.removeLocal("id"),om.removeLocal("token"),om.removeLocal("account");break;default:t.message(om.codes[e.data.code])}t.loading=!1}),t.loading=!1,t.account={},t.id=om.getLocal("id"),t.id&&(t.token=om.getLocal("token"),t.account=om.getLocal("account",""),e.defaults.headers.common["X-Auth-Token"]=t.token,r("accounts").get({id:t.id}).$promise.then(e=>{t.account=e,om.setLocal("account","",{gravatar:e.gravatar})}).catch(t.error)),t.checkAuth(),t.getToken(),t.input={ip:"192.168.0.1",mask:"255.255.255.0",bits:24},t.dec={},t.bin={},t.onChangeMask=function(){if(/^([0-9]{1,3}\.){3}[0-9]{1,3}$/.test(t.input.mask)){let e=4294967295&~t.input.mask.inet_aton();t.input.bits="0"!==e.bin()?e.bin().length:0}else t.input.bits="";t.update()},t.onChangeBits=function(){let e=/^[0-9]{1,2}$/.test(t.input.bits)&&t.input.bits>=0&&t.input.bits<=32;t.input.mask=e?(4294967295<<32-parseInt(t.input.bits,10)&4294967295).inet_ntoa():"",t.update()},t.update=function(){let e=/^([0-9]{1,3}\.){3}[0-9]{1,3}$/.test(t.input.ip),n=/^([0-9]{1,3}\.){3}[0-9]{1,3}$/.test(t.input.mask);if(!e||!n)return t.dec={},void(t.bin={});let i=t.input.mask.inet_aton();t.dec.mask=i.inet_ntoa(),t.bin.mask=i.inet_bin();let o=4294967295&~i;t.dec.wildcard=o.inet_ntoa(),t.bin.wildcard=o.inet_bin();let a=t.input.ip.inet_aton()&i;t.dec.net=a.inet_ntoa()+" / "+(32-("0"!==o.bin()?o.bin().length:0)),t.bin.net=a.inet_bin();let r=o+1;t.dec.addresses=r;let s=o-1;s<0&&(s=0),t.dec.hosts=s.toString().split("").reverse().join("").replace(/(.{3})/g,"$1 ").trim().split("").reverse().join("");let l=a+o;if(t.dec.broadcast=l.inet_ntoa(),t.bin.broadcast=l.inet_bin(),s){let e=a+1;t.dec.min=e.inet_ntoa(),t.bin.min=e.inet_bin()}else t.dec.min="",t.bin.min="";if(s){let e=l-1;t.dec.max=e.inet_ntoa(),t.bin.max=e.inet_bin()}else t.dec.max="",t.bin.max=""},t.update()}]);